import{S as B,c as M,e as q,w as l,V as F,B as U,g as _,h as o,i as V,j as f,t as x,k as A,p as N,m as a,a0 as $,Y as n,q as D,x as E,y as P}from"./index-BcYLqGWP.js";import{c as R,a as u,e as T,u as j,d as i}from"./index.esm-CF3h-nxq.js";import{v as b}from"./index-CYeX86eY.js";import{b as w}from"./route-block-B_A1xBdJ.js";const O={class:"text-center"},Y={__name:"register",setup(z){const{api:C}=U(),g=B(),h=M(),y=R({account:u().required("使用者帳號必填").min(4,"使用者帳號太短").max(20,"使用者帳號太長").test("isAlphanumeric","使用者帳號格式不符",t=>b.isAlphanumeric(t)),email:u().required("使用者信箱必填").test("isEmail","使用者信箱格式不符",t=>b.isEmail(t)),password:u().required("使用者密碼必填").min(4,"使用者密碼太短").max(20,"使用者密碼太長"),passwordConfirm:u().oneOf([T("password")],"密碼不符")}),{handleSubmit:S,isSubmitting:v}=j({validationSchema:y}),m=i("account"),d=i("email"),c=i("password"),p=i("passwordConfirm"),k=S(async t=>{var e,s;try{await C.post("/user",{account:t.account,email:t.email,password:t.password}),g({text:"註冊成功",snackbarProps:{color:"#3B6C73"}}),h.push("/login")}catch(r){console.log(r),g({text:((s=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:s.message)||"未知錯誤",snackbarProps:{color:"#C04759"}})}});return(t,e)=>(_(),q(F,null,{default:l(()=>[o(P,{class:"text-abril text-snow mt-8"},{default:l(()=>[o(V,{cols:"12"},{default:l(()=>e[4]||(e[4]=[f("h1",{class:"text-center text-h4"},x("註冊"),-1)])),_:1}),o(A),o(V,{cols:"12"},{default:l(()=>[o(N,{disabled:a(v),onSubmit:$(a(k),["prevent"])},{default:l(()=>[o(n,{modelValue:a(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a(m).value.value=s),"error-messages":a(m).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(d).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a(d).value.value=s),"error-messages":a(d).errorMessage.value,label:"信箱"},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(c).value.value,"onUpdate:modelValue":e[2]||(e[2]=s=>a(c).value.value=s),type:"password","error-messages":a(c).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(p).value.value,"onUpdate:modelValue":e[3]||(e[3]=s=>a(p).value.value=s),type:"password","error-messages":a(p).errorMessage.value,label:"確認密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),f("div",O,[o(D,{loading:a(v),type:"submit",color:"#3B6C73"},{default:l(()=>e[5]||(e[5]=[E(x("建立帳號"))])),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof w=="function"&&w(Y);export{Y as default};
