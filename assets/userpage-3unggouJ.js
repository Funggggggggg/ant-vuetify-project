import{_ as M,a5 as N,u as S,A as d,c as _,ac as T,B as U,o as n,j as u,w as a,p as x,b as l,E as f,g as v,K as R,L as G,t as V,v as C,x as k,M as L,D as w,a as $,i as K,F as O,aj as q,a7 as H,ak as J,al as Q,s as W,n as X,T as Y,z as Z}from"./index-6btvWB0H.js";import{u as ee,P as te}from"./PostCard-BPLO-ovm.js";import{z as ae}from"./vue-boring-avatars-C3mHdulT.js";import{b as A}from"./route-block-B_A1xBdJ.js";const le={class:"ma-8"},P=16,B={__name:"userpage",setup(se){const{api:D}=Z(),o=N(),E=S(),F=ee(),m=d(!1),y=d(null),c=d([]),i=d(1),p=S(),z=_(()=>Math.ceil(c.value.length/P)),I=_(()=>{var e;return((e=E.user)==null?void 0:e.id)===o.params.id});console.log("ðŸ›‘ route.params:",o.params);const r=d("created"),b=_(()=>c.value.filter(e=>r.value==="created"?e.user.toString()===o.params.id:F.collectedPosts.includes(e._id)).slice((i.value-1)*P,i.value*P)),g=async()=>{if(console.log("route.params.id:",o.params.id),!o.params.id){console.error("âŒ ç„¡æ³•ç²å–ç”¨æˆ¶ IDï¼Œè«‹ç¢ºèªç”¨æˆ¶æ˜¯å¦å·²æ­£ç¢ºé€²å…¥é é¢");return}if(!m.value){m.value=!0,y.value=null;try{const e=r.value==="created"?"/post/userposts/"+o.params.id:"/userCollect/collected/"+o.params.id;console.log("ðŸš€ API è«‹æ±‚è·¯å¾‘:",e);const{data:s}=await D.get(e);if(!(s!=null&&s.result))throw new Error("ç„¡æ•ˆçš„å›žæ‡‰æ ¼å¼");c.value=s.result,console.log("âœ… ç²å–çš„æ–‡ç« :",c.value)}catch(e){console.error("âŒ ç²å–æ–‡ç« å¤±æ•—:",e),e.value="ç„¡æ³•å–å¾—æ–‡ç« è³‡æ–™",c.value=[]}finally{m.value=!1}}},h=e=>{r.value!==e&&(r.value=e,i.value=1,g())};return T(r,g),T(()=>o.params.id,()=>{g()}),U(()=>{g()}),(e,s)=>(n(),u(X,{style:{"margin-top":"50px"}},{default:a(()=>[x("div",le,[l(w,{class:"d-flex justify-center align-center text-snow"},{default:a(()=>[l(f,{cols:"2"},{default:a(()=>{var t;return[l(v(ae),{size:200,variant:"beam",name:((t=v(p))==null?void 0:t.account)||"Guest",title:!0,style:{"margin-right":"10px"}},null,8,["name"])]}),_:1}),l(f,{cols:"6",style:{"margin-left":"50px"},class:"text-snow"},{default:a(()=>[l(R,{variant:"text",class:"d-flex flex-column text-h5 content"},{default:a(()=>[l(G,{style:{"margin-top":"10px"},class:"usrAccount"},{default:a(()=>{var t;return[x("h2",null,V(((t=v(p))==null?void 0:t.account)||"æœªçŸ¥ç”¨æˆ¶"),1),I.value?(n(),u(C,{key:0,icon:"mdi-pencil",variant:"text",class:"text-snow"})):k("",!0)]}),_:1}),l(L,null,{default:a(()=>{var t;return[x("p",null,V(((t=v(p))==null?void 0:t.introduce)||"å°šç„¡ä»‹ç´¹"),1)]}),_:1})]),_:1})]),_:1}),l(f,{cols:"12",class:"d-flex justify-center align-center"},{default:a(()=>[l(C,{text:"å·²å»ºç«‹",class:"text-body-2 me-4 font-weight-bold rounded-lg",variant:r.value==="created"?"flat":"outlined",color:(r.value==="created","#F1D87F"),onClick:s[0]||(s[0]=t=>h("created"))},null,8,["variant","color"]),l(C,{text:"å·²æ”¶è—",class:"text-body-2 ms-4 font-weight-bold rounded-lg",variant:r.value==="favorite"?"flat":"outlined",color:(r.value==="favorite","#C04759"),onClick:s[1]||(s[1]=t=>h("favorite"))},null,8,["variant","color"])]),_:1})]),_:1}),b.value.length>0?(n(),u(w,{key:0,class:"d-flex justify-center"},{default:a(()=>[(n(!0),$(O,null,K(b.value,t=>(n(),u(f,{key:t.id,cols:"12",md:"6",lg:"3",class:"mt-4"},{default:a(()=>{var j;return[l(te,Y({ref_for:!0},t,{account:(j=v(p))==null?void 0:j.account}),null,16,["account"])]}),_:2},1024))),128)),l(f,{cols:"12"},{default:a(()=>[l(q,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),length:z.value},null,8,["modelValue","length"])]),_:1})]),_:1})):(n(),u(w,{key:1,class:"d-flex justify-center text-center text-snow text-body-2 mt-8"},{default:a(()=>s[3]||(s[3]=[x("p",null," å°šç„¡æ–‡ç«  ",-1)])),_:1}))]),m.value?(n(),u(H,{key:0,class:"d-flex align-center justify-center"},{default:a(()=>[l(J,{indeterminate:""})]),_:1})):k("",!0),y.value?(n(),u(Q,{key:1,type:"error",variant:"tonal",class:"ma-4"},{default:a(()=>[W(V(y.value),1)]),_:1})):k("",!0)]),_:1}))}};typeof A=="function"&&A(B);const ce=M(B,[["__scopeId","data-v-378efb6f"]]);export{ce as default};
