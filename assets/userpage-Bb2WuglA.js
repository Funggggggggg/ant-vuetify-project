import{a4 as I,u as S,A as d,c as _,aa as A,B as N,o as n,j as u,w as a,p as x,b as l,D as f,g as m,U as M,W as R,t as V,v as C,x as w,X as G,H as P,a as $,i as H,F as K,ah as L,a6 as O,ai as W,aj as X,s as q,n as J,K as Q,z as Y}from"./index-cUmXSPEJ.js";import{u as Z,P as ee}from"./PostCard-CKCNDN5m.js";import{z as te}from"./vue-boring-avatars-B0ASY4lP.js";import{b as B}from"./route-block-B_A1xBdJ.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"ma-8"},k=16,D={__name:"userpage",setup(se){const{api:F}=Y(),o=I(),T=S(),E=Z(),v=d(!1),y=d(null),c=d([]),i=d(1),p=S(),U=_(()=>Math.ceil(c.value.length/k)),z=_(()=>{var e;return((e=T.user)==null?void 0:e.id)===o.params.id});console.log("ðŸ›‘ route.params:",o.params);const r=d("created"),b=_(()=>c.value.filter(e=>r.value==="created"?e.user.toString()===o.params.id:E.collectedPosts.includes(e._id)).slice((i.value-1)*k,i.value*k)),g=async()=>{if(console.log("route.params.id:",o.params.id),!o.params.id){console.error("âŒ ç„¡æ³•ç²å–ç”¨æˆ¶ IDï¼Œè«‹ç¢ºèªç”¨æˆ¶æ˜¯å¦å·²æ­£ç¢ºé€²å…¥é é¢");return}if(!v.value){v.value=!0,y.value=null;try{const e=r.value==="created"?"/post/userposts/"+o.params.id:"/userCollect/collected/"+o.params.id;console.log("ðŸš€ API è«‹æ±‚è·¯å¾‘:",e);const{data:s}=await F.get(e);if(!(s!=null&&s.result))throw new Error("ç„¡æ•ˆçš„å›žæ‡‰æ ¼å¼");c.value=s.result,console.log("âœ… ç²å–çš„æ–‡ç« :",c.value)}catch(e){console.error("âŒ ç²å–æ–‡ç« å¤±æ•—:",e),e.value="ç„¡æ³•å–å¾—æ–‡ç« è³‡æ–™",c.value=[]}finally{v.value=!1}}},h=e=>{r.value!==e&&(r.value=e,i.value=1,g())};return A(r,g),A(()=>o.params.id,()=>{g()}),N(()=>{g()}),(e,s)=>(n(),u(J,{style:{"margin-top":"50px"}},{default:a(()=>[x("div",le,[l(P,{class:"d-flex justify-center align-center text-snow"},{default:a(()=>[l(f,{cols:"2"},{default:a(()=>{var t;return[l(m(te),{size:200,variant:"beam",name:((t=m(p))==null?void 0:t.account)||"Guest",title:!0,style:{"margin-right":"10px"}},null,8,["name"])]}),_:1}),l(f,{cols:"6",style:{"margin-left":"50px"},class:"text-snow"},{default:a(()=>[l(M,{variant:"text",class:"d-flex flex-column text-h5 content"},{default:a(()=>[l(R,{style:{"margin-top":"10px"},class:"usrAccount"},{default:a(()=>{var t;return[x("h2",null,V(((t=m(p))==null?void 0:t.account)||"æœªçŸ¥ç”¨æˆ¶"),1),z.value?(n(),u(C,{key:0,icon:"mdi-pencil",variant:"text",class:"text-snow"})):w("",!0)]}),_:1}),l(G,null,{default:a(()=>{var t;return[x("p",null,V(((t=m(p))==null?void 0:t.introduce)||"å°šç„¡ä»‹ç´¹"),1)]}),_:1})]),_:1})]),_:1}),l(f,{cols:"12",class:"d-flex justify-center align-center"},{default:a(()=>[l(C,{text:"å·²å»ºç«‹",class:"text-body-2 me-4 font-weight-bold rounded-lg",variant:r.value==="created"?"flat":"outlined",color:(r.value==="created","#F1D87F"),onClick:s[0]||(s[0]=t=>h("created"))},null,8,["variant","color"]),l(C,{text:"å·²æ”¶è—",class:"text-body-2 ms-4 font-weight-bold rounded-lg",variant:r.value==="favorite"?"flat":"outlined",color:(r.value==="favorite","#C04759"),onClick:s[1]||(s[1]=t=>h("favorite"))},null,8,["variant","color"])]),_:1})]),_:1}),b.value.length>0?(n(),u(P,{key:0,class:"d-flex justify-center"},{default:a(()=>[(n(!0),$(K,null,H(b.value,t=>(n(),u(f,{key:t.id,cols:"12",md:"6",lg:"3",class:"mt-4"},{default:a(()=>{var j;return[l(ee,Q({ref_for:!0},t,{account:(j=m(p))==null?void 0:j.account}),null,16,["account"])]}),_:2},1024))),128)),l(f,{cols:"12"},{default:a(()=>[l(L,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),length:U.value},null,8,["modelValue","length"])]),_:1})]),_:1})):(n(),u(P,{key:1,class:"d-flex justify-center text-center text-snow text-body-2 mt-8"},{default:a(()=>s[3]||(s[3]=[x("p",null," å°šç„¡æ–‡ç«  ",-1)])),_:1}))]),v.value?(n(),u(O,{key:0,class:"d-flex align-center justify-center"},{default:a(()=>[l(W,{indeterminate:""})]),_:1})):w("",!0),y.value?(n(),u(X,{key:1,type:"error",variant:"tonal",class:"ma-4"},{default:a(()=>[q(V(y.value),1)]),_:1})):w("",!0)]),_:1}))}};typeof B=="function"&&B(D);const ie=ae(D,[["__scopeId","data-v-378efb6f"]]);export{ie as default};
